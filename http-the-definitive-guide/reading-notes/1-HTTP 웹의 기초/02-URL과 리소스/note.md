# URL (Uniform Resource Locator)

URL은 브라우저가 정보를 찾는데 필요한 리소스의 위치를 가리킨다.

# URI (Uniform Resource Identifier)

두 가지 주요 부분 집합인, URL과 URN으로 구성된 종합적인 개념

예를 들어 다음과 같은 URL을 좀 더 자세히 살펴보자.

```http
http://www.joes-hardware.com:80/seasonal/index-fall.html
```

구성요소를 그림으로 나타내면 다음과 같다.
![img.png](img.png)

URL은 HTTP 프로토콜이 아닌, 다른 가용 가능한 프로토콜을 사용할 수도 있다.

- `mailto:president@whitehouse.gov`는 이메일 주소를 가리키며
- `ftp://ftp.is.co.za/rfc/rfc1808.txt` 는 FTP 서버에 올라가있는 파일을 가리킨다.

이처럼 URL의 포맷을 정리하면 다음과 같다.

```
scheme://username:password@host:port/path;parameters?query#fragment
```

# URL 문법

| 컴포넌트       | 설명                                                                                    | 기본값            |
|------------|---------------------------------------------------------------------------------------|----------------|
| scheme     | 리소스에 접근하기 위해 사용되는 프로토콜                                                                |                |
| username   | 리소스에 접근하기 위해 사용되는 사용자 이름                                                              | anonymous      |
| password   | 리소스에 접근하기 위해 사용되는 비밀번호                                                                | <이메일주소>        |
| host       | 리소스가 위치한 서버의 호스트명                                                                     |                |
| port       | 서버가 리소스에 접근하기 위해 사용하는 포트                                                              | schema 에 따라 다름 |
| path       | 서버에서 제공하는 리소스의 경로 이전 컴포넌트와는 슬래시(/)문자를 통해 구분                                           |                |
| parameters | 리소스에 대한 추가적인 정보를 제공하는데 사용되는 이름/값 쌍. <br>다른 파라미터나 경로의 일부와 세미콜론으로 구분하여 기술, 여러개를 가질 수 있음 |                |
| query      | 리소스에 대한 검색을 위한 추가적인 정보를 제공하는데 사용되는 이름/값 쌍                                             |                |
| fragment   | 리소스의 조각을 가리키는데 사용되는 이름/값 쌍. 주로 리소스의 특정 부분을 가리키는데 사용됨.                                 |                |

## host & port

애플리케이션이 인터넷에 있는 리소스를 찾으려면, 리소스를 호스팅하고 있는 장비와 그 장비 내에서 리소스에 접근할 수 있는 서버가 어디에 있는지 알아야 한다.
URL의 호스트와 포트 컴포넌트는 그 두가지 정보를 제공한다.

## username & password

많은 서버가 자신이 가지고 있는 데이터에 접근을 허용하기 전에 사용자 이름과 비밀번호를 요구한다.

FTP서버가 좋은 예로 다음 몇가지가 있다.

![img_1.png](img_1.png)

애플리케이션이 FTP와 같이 사용자 이름과 비밀번호를 요구하는 URL 스킴울 사용한다면, 그 값들이 삽입되어 있지 않을 경우 기본 사용자 이름과 비밀 번호 값을 넣어놓을 것이다.

(사용자 이름을 기술하지 않으면 username에 기본값으로 `anonymous`를 사용하고, 비밀번호는 브라우저마다 가지고 있는 기본 값을 사용한다. 인터넷
익스플로러는 `IEUser`을 크롬은 `crhome@example.com`을 사용한다.)

# path

URL의 경로 컴포넌트는 리소스가 서버의 어디에 있는지 알려준다. 아래 예와 같이 경로는 계층적 파일 시스템의 경로와 유사한 구조를 가진다.

```
http://www.joes-hardware.com:80/seasonal/index-fall.html
```

위 URL은 `www.joes-hardware.com`이라는 호스트에 위치한 `seasonal`이라는 디렉토리에 있는 `index-fall.html`이라는 파일을 가리킨다.

# parameters

파라미터 컴포넌트는 리소스에 대한 추가적인 정보를 제공하는데 사용된다.

파라미터는 이름/값 쌍으로 구성되며, 이름과 값은 등호(=)로 구분되고, 이름/값 쌍은 세미콜론(;)으로 구분된다.

```
http://www.joes-hardware.com/hammers;sale=false/index.html;graphics=true
```

위 URL에는 `hammers` 이라는 경로 조각은 `sale` 이라는 파라미터를 가지며, `index.html` 이라는 파일은 `graphics` 라는 파라미터를 가진다.

# query

쿼리 컴포넌트는 리소스에 대한 검색을 위한 추가적인 정보를 제공하는데 사용된다.

일반적으로 데이터베이스같은 서비스들은 요청받을 리소스 형식의 범위를 좁히기 위해 쿼리를 사용한다.

쿼리는 이름/값 쌍으로 구성되며, 이름과 값은 등호(=)로 구분되고, 이름/값 쌍은 앰퍼샌드(&)로 구분된다.

```
http://www.joes-hardware.com/tools.html?type=hammers&size=large
```

위 URL은 `tools.html`이라는 파일에 대한 요청을 보내며, `type`이라는 쿼리 파라미터는 `hammers`이고, `size`라는 쿼리 파라미터는 `large`이다.

# fragment

프래그먼트 컴포넌트는 리소스의 조각을 가리키는데 사용된다.

HTML과 같은 문서에서는 프래그먼트가 문서 내의 특정 위치를 가리키는데 사용된다.

예를 들어 다음 URL은 `index.html`이라는 파일의 `section1`이라는 프래그먼트를 가리킨다.

```
http://www.joes-hardware.com/index.html#section1
```

일반적으로 HTTP 서버는 객체 일부가 아닌 전체만 다루기 때문에, 클라이언트는 서버에 fragment를 전달하지 않는다.

# 상대 URL

지금까지 살펴본 URL은 절대 URL로, 리소스의 위치를 완전하게 명시하는 URL이다.

상대 URL로 리소스에 접근하기 위해서는 기저 URL(base URL)이라는 다른 URL을 사용해야 한다.

```html

<HTML lang="ko">
<HEAD>
    <TITLE>Joe's Tools</TITLE></HEAD>
<BODY>
<Hl> Tools Page</Hl>
<H2> Hammers
    <H2>
        <P> Joe' s Hardware Online has the largest selection of
            <A href="./hammers.html">hammers</A> on earth.
        </P>
    </H2>
</BODY>
</HTML>
```

여기서 `A`태그 내 `href` 속성의 값이 `./hammers.html`이다. 이는 현재 문서의 위치를 기준으로 `hammers.html`이라는 파일을 가리킨다.

추가적으로 `../` 는 상위 디렉토리를 가리키며, `./`는 현재 디렉토리를 가리킨다. 이처럼 상대 URL은 현재 문서의 위치를 기준으로 리소스의 위치를 가리킨다.

![img_2.png](img_2.png)

## 상대 URL이 어떻게 절대 URL로 변환될까?

아래는 같이 상대 URL을 절대 URL로 변환하는 과정을 도표화한 것이다.

![img_3.png](img_3.png)

# 안전하지 않은 문자

URL은 ASCII 문자 집합을 사용하며, 안전하지 않은 문자는 URL 인코딩을 통해 전송된다.

안전하지 않은 문자는 URL을 해석하는데 사용되는 문자이며, URL 인코딩은 이러한 문자를 다른 문자로 대체한다.

예를 들어, URL 인코딩은 공백을 `%20`으로 대체하는 식이다.

## 문자 제한

몇몇 문자는 URL 내에서 특별한 의미로 예약되어 있다. 이러한 문자들은 URL 인코딩을 통해 전송된다.

아래는 URL에서 예약된 문자들이다.

| 문자                                 | 선점 및 제한                                                                    |
|------------------------------------|----------------------------------------------------------------------------|
| `%`                                | 인코딩 도니 문자에 사용할 이스케이프 토큰으로 선점                                               |
| `/`                                | 경로 컴포넌트에 있는 경로 세그먼트를 나누는 용도로 선점                                            |
| `.`                                | 경로 컴포넌트에서 선점                                                               |
| `..`                               | 경로 컴포넌트에서 선점                                                               |
| `#`                                | 프래그먼트의 구획 문자로 선점                                                           |
| `?`                                | 질의 문자열의 구획 문자로 선점                                                          |
| `;`                                | 파라미터의 구획 문자로 선점                                                            |
| `:`                                | 스킴, 포트, 사용자 이름, 비밀번호, 파라미터, 쿼리, 프래그먼트의 구획 문자로 선점                           |
| `$`, `+`                           | 특별한 의미를 가지는 문자로 선점                                                         |
| `@`, `&`, `=`                      | 특정 스킴에서 특별한 의미가 있기 때문에 선점                                                  |
| `{`, `}`, `\|`, `\`, `^`, `[`, `]` | 게이트웨이와 같은 여러 전송 에이전트에서 불안전하게 다루기 때문에 제한됨                                   |
| `<`, `>`, `"`                      | 안전하지 않음. 웹 문서에서 URL을 구분 지어 표시하듯이 URL의 범위 밖에서 역할이 있는 문자이기 때문에 반드시 인코딩해야 한다. |
| `0x00` ~ `0x1F`, `0x7F`            | 제어 문자는 안전하지 않음.                                                            |
| > 0x7F                             | 7비트 ASCII 문자 집합을 벗어나는 문자는 안전하지 않음.                                         |

# Schema

웹에서 잘 사용되는 스키마는 다음과 같다.

| Schema   | 설명                                                                                                                                                                 |
|----------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `http`   | 사용자 이름이나 비밀번호가 없다는 것을 제외하고는, 일반 URL 포맷을 지키는 하이퍼텍스트 전송 프로토콜(Hypertext Transfer Protocol) 스킴이다. 포트값이 생략되어 있으면 기본값은 80이다                                              |
| `https`  | `https` 스킴은 `http` 스킴과 거의 같다 다른 점이라고는 `https`는 HTTP의 커넥션의 양 끝단에서 암호화하기 위해 넷스케이프에서 개발한 보안 소켓 계층(Secure Sockets Layer, SSL)을 사용 한다는 것뿐이다. 문법은 HTTP와 같고 기본 포트값은 443이다 |
| `mailto` | `mailto` URL은 이메일 주소를 가리킨다. 이메일은 다른 스킴과는 다르게 동작하기 때문에, `mailto` URL은 표준 URL과는 다른 포맷을 가진다 인터넷 이메일 주소의 문법은 RFC822에 기술되어있다                                            |
| `ftp`    | `ftp` 스킴은 파일 전송 프로토콜(File Transfer Protocol)을 사용한다. `ftp` 스킴은 `http` 스킴과 비슷하게 동작하지만, `ftp`는 파일을 전송하기 위해 사용된다. 기본 포트값은 21이다.                                        |
| `file`   | `file` 스킴은 파일 시스템에 있는 파일을 가리킨다. `file` 스킴은 파일을 로컬 파일 시스템에서 찾을 때 사용된다. `file` 스킴은 `http` 스킴과 비슷하게 동작하지만, `file` 스킴은 파일을 전송하기 위해 사용된다. 기본 포트값은 없다.                   |

# URL의 단점과 미래
URL은 주소이지 실제 이름은 아니다. 이는 URL이 특정 시점에 어떤 것이 위치한 곳을 알려준다는 것을 뜻한다. 이는 리소스가 이동하거나, 삭제되거나, 이름이 바뀌면 URL이 더 이상 유효하지 않게 된다.

이런 문제를 예방할 수 있는 이상적인 방법은 객체의 위치와 상관없이이, 그 객체를 가리키는 실제 객체의 이름을 사용하는 것이다. 사람처럼 리소스의 이름과 다른 몇가지 정보만 있으면 그것의 위치가 다르더라도 위치를 찾을 수 있다.

인터넷 기술 태스크 포스(Internet Engineering Task Force, IETF)는 한동안 고심 한 끝에 URN(Uniform Resource Names)이라는 새로운 표준 작업에 착수하였다. URN은 객체가 옮겨지더라도(웹 서버 내에서나 웹 서버 간 모두) 항상 객체를 가리킬 수 있는 이름을 제공한다.